<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vagas</title>
    <base href="/vagas">
</head>

<body>
    <hr class="dropdown-divider">

    <h2 class="d-flex justify-content-center">Cadastrar</h2>
    <div class="d-flex justify-content-center">
        <form>
            <div class="form-row">
                <div class="form-group">
                    <label>Descricao</label>
                    <input type="text" class="form-control" size="50" placeholder="Vaga" id="vaga" name="vaga"
                        [(ngModel)]="vaga.descricao">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Empresa</label>
                    <input type="text" class="form-control" size="50" placeholder="Empresa" id="empresa" name="empresa"
                        [(ngModel)]="vaga.empresa">
                </div>
            </div>
            <div class="d-flex justify-content-end">
                <button type="submit" class="btn btn-primary" (click)="cadastrar()">Cadastrar</button>
            </div>
        </form>

    </div>
    <br>
    <hr class="dropdown-divider">
    <br>
    <h5 class="d-flex justify-content-center">Relacionar vagas e suas linguagens</h5>
    <div class="d-flex justify-content-center">
        <form>
            <div class="form-row">
                <div class="form-group col">
                    <label>Vagas</label>
                    <select id="vagas" name="vagas" class="form-control" [(ngModel)]="tool.id_vaga">
                        <option style="width:100%;" *ngFor="let vaga of vagas" value={{vaga.id}}>{{vaga.descricao}} -
                            {{vaga.empresa}}</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col">
                    <label>Linguagens</label>
                    <select id="linguagens" name="linguagens" class="form-control" [(ngModel)]="tool.id_linguagem">
                        <option style="width:100%;" *ngFor="let linguagem of linguagens" value={{linguagem.id}}>
                            {{linguagem.nome}}</option>
                    </select>
                </div>
            </div>
            <div class="d-flex justify-content-end">
                <button type="submit" class="btn btn-primary" (click)="cadFerramenta()">Relacionar</button>
            </div>
        </form>
    </div>
    <br>
    <hr class="dropdown-divider">
    <br>
    <h3 class="d-flex justify-content-center">vagas cadastrados</h3>
    <table class="table table-striped">
        <tr>
            <th>#id</th>
            <th>Descrição</th>
            <th>Empresa</th>
            <th>Linguagens</th>
        </tr>

        <tr *ngFor="let vaga of vagas">
            <td>{{vaga.id}}</td>
            <td>{{vaga.descricao}}</td>
            <td>{{vaga.empresa}}</td>
            <td>
                <ul *ngFor="let tool of tools">
                    <li *ngIf="vaga.id === tool.id">{{tool.nome}}</li>
                </ul>
                <!--<select id="tool" name="tools" class="form-control">
                    <option style="width:100%;" (click)="listarFerramentasId(vaga.id)" 
                        value={{vaga.id}} *ngFor="let tool of tools" [ngIf]="vaga.id === tool.id">{{tool.nome}}</option>
                </select>-->
            </td>
            <td class="overflow-hidden">
                <div ngbDropdown container="body">
                    <button class="btn btn-outline-primary btn-sm" ngbDropdownToggle>♠</button>
                    <div ngbDropdownMenu>
                        <button ngbDropdownItem (click)="atualizar(vaga.id)">Atualizar</button>
                        <div class="dropdown-divider"></div>
                        <button ngbDropdownItem (click)="remover(vaga.id)">Delete</button>
                    </div>
                </div>
            </td>
        </tr>
    </table>
</body>

</html>